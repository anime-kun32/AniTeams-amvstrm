<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Carousel</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
     <link rel="stylesheet" href="css/style.css">
    
</head>
<body>

<div class="container mx-auto my-10">
    <div class="owl-carousel owl-theme">
        <!-- Slide 1 -->
        <div class="movie-slide" style="background-image: url('path_to_movie_image1.jpg');">
            <div class="movie-details">
                <h2 class="text-2xl font-bold">Movie Title 1</h2>
                <p class="text-gray-200 mt-2">This is a brief description of the movie. It's an exciting film about...</p>
                <div class="text-gray-400 mt-2">
                    <p>PG-13</p> |
                    <p>2021</p> |
                    <p>Action, Adventure</p>
                </div>
            </div>
        </div>
        <!-- Slide 2 -->
        <div class="movie-slide" style="background-image: url('path_to_movie_image2.jpg');">
            <div class="movie-details">
                <h2 class="text-2xl font-bold">Movie Title 2</h2>
                <p class="text-gray-200 mt-2">This is a brief description of the movie. It's a thrilling tale of...</p>
                <div class="text-gray-400 mt-2">
                    <p>R</p> |
                    <p>2020</p> |
                    <p>Horror, Thriller</p>
                </div>
            </div>
        </div>
        <!-- Add more slides as needed -->
    </div>
</div>

<!-- Demarcating line and heading -->
<hr class="border-gray-700 my-4">
<h5 class="text-xl font-bold text-white mb-4">Trending Now</h5>

<!-- Container for loading spinner, messages, and movie cards -->
<div class="relative overflow-x-auto whitespace-nowrap py-4 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800" id="scroll-container">
    <div id="loading-spinner" class="absolute inset-0 flex justify-center items-center bg-gray-900 bg-opacity-70 z-10">
        <div class="loader"></div>
    </div>
    <div id="error-message" class="hidden text-red-500 text-center py-4">Error fetching data. Please try again later.</div>
    <div id="no-data-message" class="hidden text-yellow-500 text-center py-4">No data found.</div>
    <div id="movie-container" class="flex space-x-2">
        <!-- Movie cards will be appended here -->
    </div>
</div>

<style>
    /* Custom scrollbar styling */
    .scrollbar-thin::-webkit-scrollbar {
        height: 8px;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
        background-color: #4a4a4a;
        border-radius: 10px;
    }
    .scrollbar-thin::-webkit-scrollbar-track {
        background: #333;
    }

    /* Hover effects for movie cards */
    .movie-card:hover .movie-image {
        filter: blur(4px);
    }
    .movie-card:hover .movie-info {
        opacity: 1;
    }
    .movie-card {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .movie-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
    }

    /* Styling for text overflow handling */
    .movie-info h2,
    .movie-info p {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    /* Loading spinner styling */
    .loader {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #3498db;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const loadingSpinner = document.getElementById('loading-spinner');
        const errorMessage = document.getElementById('error-message');
        const noDataMessage = document.getElementById('no-data-message');
        const movieContainer = document.getElementById('movie-container');
        const scrollContainer = document.getElementById('scroll-container');

        // Show loading spinner
        loadingSpinner.classList.remove('hidden');

        fetch('https://api-p1xr.vercel.app/api/v2/trending') // Replace with your actual API endpoint
            .then(response => response.json())
            .then(data => {
                // Hide loading spinner
                loadingSpinner.classList.add('hidden');

                if (data.results.length === 0) {
                    noDataMessage.classList.remove('hidden');
                    return;
                }

                noDataMessage.classList.add('hidden');

                data.results.forEach(movie => {
                    const card = document.createElement('div');
                    card.className = "movie-card relative bg-gray-800 rounded-lg overflow-hidden flex-shrink-0 w-36 h-56";

                    card.innerHTML = `
                        <a href="https://google.com/${movie.id}" target="_blank">
                            <img src="${movie.coverImage.extraLarge}" alt="${movie.title.english}" class="movie-image w-full h-full object-cover">
                            <div class="movie-info absolute inset-0 bg-gray-900 bg-opacity-80 opacity-0 flex flex-col justify-center items-center text-center p-2 transition-opacity duration-300">
                                <h2 class="text-sm font-bold mb-1">${movie.title.english}</h2>
                                <p class="text-xs mb-1">${movie.genres.join(', ')}</p>
                                <p class="text-xs">Episodes: ${movie.episodes}</p>
                                <p class="text-xs">Season Year: ${movie.seasonYear}</p>
                            </div>
                        </a>
                    `;

                    movieContainer.appendChild(card);
                });
            })
            .catch(error => {
                // Hide loading spinner
                loadingSpinner.classList.add('hidden');

                // Show error message
                errorMessage.classList.remove('hidden');
                console.error('Error fetching data:', error);
            });

        // Function to handle horizontal scroll with arrow keys
        function handleArrowKeyScroll(event) {
            const scrollAmount = 100; // Amount to scroll with each key press

            switch (event.key) {
                case 'ArrowRight':
                    scrollContainer.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                    break;
                case 'ArrowLeft':
                    scrollContainer.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                    break;
                default:
                    return; // Exit the function if the key is not ArrowRight or ArrowLeft
            }
        }

        // Add event listener for keydown events
        document.addEventListener('keydown', handleArrowKeyScroll);
    });
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
<script>
    $(document).ready(function(){
        $(".owl-carousel").owlCarousel({
            loop: true,
            margin: 10,
            nav: true,
            dots: true,
            items: 1,
            autoplay: true,
            autoplayTimeout: 5000
        });
    });
</script>

</body>
</html>
